{"ast":null,"code":"import React,{useState,useEffect}from'react';import{characters,getCharactersByRatio,getRandomCharacter}from'../data/characters';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const RatioTeamBuilder=()=>{const[team,setTeam]=useState([null,null,null]);const[totalPoints,setTotalPoints]=useState(0);const[isAnimating,setIsAnimating]=useState(false);const handleCharacterClick=character=>{setTeam(prevTeam=>{const existingIndex=prevTeam.findIndex(char=>char&&char.name===character.name);if(existingIndex!==-1){// Remove character if it's already in the team\nconst newTeam=[...prevTeam];newTeam[existingIndex]=null;return newTeam;}else{// Add character to the first empty slot if not already in team and enough points\nconst emptyIndex=prevTeam.findIndex(char=>char===null);if(emptyIndex!==-1&&totalPoints+character.ratio<=7){const newTeam=[...prevTeam];newTeam[emptyIndex]=character;return newTeam;}}// Return unchanged team if no action was taken\nreturn prevTeam;});};useEffect(()=>{const newTotalPoints=team.reduce((sum,char)=>sum+(char?char.ratio:0),0);setTotalPoints(newTotalPoints);},[team]);const resetTeam=()=>{setTeam([null,null,null]);setTotalPoints(0);};const generateRandomTeam=()=>{let newTeam=[null,null,null];let points=0;for(let i=0;i<3;i++){const remainingPoints=7-points;const remainingSlots=3-i;const maxRatio=Math.min(remainingPoints-(remainingSlots-1),5);// Ensure we can fill remaining slots\nconst minRatio=i===2?remainingPoints:1;// For the last slot, use all remaining points\nconst availableCharacters=characters.filter(char=>char.ratio<=maxRatio&&char.ratio>=minRatio);if(availableCharacters.length===0){// If we can't find a suitable character, start over\nreturn generateRandomTeam();}const randomChar=getRandomCharacter(newTeam.filter(Boolean).map(c=>c.name),availableCharacters);if(randomChar){newTeam[i]=randomChar;points+=randomChar.ratio;}else{// If we can't get a random character, start over\nreturn generateRandomTeam();}}// Double-check that we have exactly 7 points and 3 characters\nif(points!==7||newTeam.some(char=>char===null)){return generateRandomTeam();}setTeam(newTeam);setTotalPoints(points);};return/*#__PURE__*/_jsxs(\"div\",{className:\"ratio-team-builder\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"left-column\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"MvC2 Ratio Team Builder\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"points-display\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"total-points\",children:[\"Total: \",totalPoints,\"/7\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"remaining-points\",children:[\"Remaining: \",7-totalPoints]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"team-display\",children:team.map((char,index)=>/*#__PURE__*/_jsx(\"div\",{className:`character-card ${isAnimating?'fade-in':''}`,children:char?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"img\",{src:char.image,alt:char.name,onError:e=>{e.target.onerror=null;e.target.src='/images/characters/default.png';}}),/*#__PURE__*/_jsxs(\"p\",{children:[char.name,\" (\",char.ratio,\")\"]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"img\",{src:`/images/characters/slot-${index+1}.png`,alt:`Empty Slot ${index+1}`}),/*#__PURE__*/_jsx(\"p\",{children:\"Empty Slot\"})]})},index))}),/*#__PURE__*/_jsxs(\"div\",{className:\"team-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:generateRandomTeam,className:\"primary-button\",children:\"Generate Ratio Team\"}),/*#__PURE__*/_jsx(\"button\",{onClick:resetTeam,className:\"secondary-button\",children:\"Reset Team\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"right-column\",children:/*#__PURE__*/_jsx(\"div\",{className:\"available-characters\",children:characters.map(char=>{const isSelected=team.some(c=>c&&c.name===char.name);const canSelect=!isSelected&&7-totalPoints>=char.ratio&&team.some(c=>c===null);return/*#__PURE__*/_jsxs(\"div\",{className:\"character-item\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleCharacterClick(char),disabled:!isSelected&&!canSelect,className:isSelected?'selected':'',children:/*#__PURE__*/_jsx(\"img\",{src:char.tileImage,alt:char.name,onError:e=>{e.target.onerror=null;e.target.src='/images/tiles/default.png';}})}),/*#__PURE__*/_jsx(\"div\",{className:\"character-info\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"character-name\",children:[char.name,\" (\",char.ratio,\")\"]})})]},char.name);})})})]});};export default RatioTeamBuilder;","map":{"version":3,"names":["React","useState","useEffect","characters","getCharactersByRatio","getRandomCharacter","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","RatioTeamBuilder","team","setTeam","totalPoints","setTotalPoints","isAnimating","setIsAnimating","handleCharacterClick","character","prevTeam","existingIndex","findIndex","char","name","newTeam","emptyIndex","ratio","newTotalPoints","reduce","sum","resetTeam","generateRandomTeam","points","i","remainingPoints","remainingSlots","maxRatio","Math","min","minRatio","availableCharacters","filter","length","randomChar","Boolean","map","c","some","className","children","index","src","image","alt","onError","e","target","onerror","onClick","isSelected","canSelect","disabled","tileImage"],"sources":["C:/Users/namyd/mvc2-randomizer/src/components/RatioTeamBuilder.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { characters, getCharactersByRatio, getRandomCharacter } from '../data/characters';\r\n\r\nconst RatioTeamBuilder = () => {\r\n  const [team, setTeam] = useState([null, null, null]);\r\n  const [totalPoints, setTotalPoints] = useState(0);\r\n  const [isAnimating, setIsAnimating] = useState(false);\r\n\r\n  const handleCharacterClick = (character) => {\r\n    setTeam(prevTeam => {\r\n      const existingIndex = prevTeam.findIndex(char => char && char.name === character.name);\r\n      \r\n      if (existingIndex !== -1) {\r\n        // Remove character if it's already in the team\r\n        const newTeam = [...prevTeam];\r\n        newTeam[existingIndex] = null;\r\n        return newTeam;\r\n      } else {\r\n        // Add character to the first empty slot if not already in team and enough points\r\n        const emptyIndex = prevTeam.findIndex(char => char === null);\r\n        if (emptyIndex !== -1 && totalPoints + character.ratio <= 7) {\r\n          const newTeam = [...prevTeam];\r\n          newTeam[emptyIndex] = character;\r\n          return newTeam;\r\n        }\r\n      }\r\n      \r\n      // Return unchanged team if no action was taken\r\n      return prevTeam;\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    const newTotalPoints = team.reduce((sum, char) => sum + (char ? char.ratio : 0), 0);\r\n    setTotalPoints(newTotalPoints);\r\n  }, [team]);\r\n\r\n  const resetTeam = () => {\r\n    setTeam([null, null, null]);\r\n    setTotalPoints(0);\r\n  };\r\n\r\n  const generateRandomTeam = () => {\r\n    let newTeam = [null, null, null];\r\n    let points = 0;\r\n    \r\n    for (let i = 0; i < 3; i++) {\r\n      const remainingPoints = 7 - points;\r\n      const remainingSlots = 3 - i;\r\n      const maxRatio = Math.min(remainingPoints - (remainingSlots - 1), 5); // Ensure we can fill remaining slots\r\n      const minRatio = i === 2 ? remainingPoints : 1; // For the last slot, use all remaining points\r\n      \r\n      const availableCharacters = characters.filter(char => char.ratio <= maxRatio && char.ratio >= minRatio);\r\n      \r\n      if (availableCharacters.length === 0) {\r\n        // If we can't find a suitable character, start over\r\n        return generateRandomTeam();\r\n      }\r\n\r\n      const randomChar = getRandomCharacter(newTeam.filter(Boolean).map(c => c.name), availableCharacters);\r\n      \r\n      if (randomChar) {\r\n        newTeam[i] = randomChar;\r\n        points += randomChar.ratio;\r\n      } else {\r\n        // If we can't get a random character, start over\r\n        return generateRandomTeam();\r\n      }\r\n    }\r\n    \r\n    // Double-check that we have exactly 7 points and 3 characters\r\n    if (points !== 7 || newTeam.some(char => char === null)) {\r\n      return generateRandomTeam();\r\n    }\r\n    \r\n    setTeam(newTeam);\r\n    setTotalPoints(points);\r\n  };\r\n\r\n  return (\r\n    <div className=\"ratio-team-builder\">\r\n      <div className=\"left-column\">\r\n        <h2>MvC2 Ratio Team Builder</h2>\r\n        <div className=\"points-display\">\r\n          <p className=\"total-points\">Total: {totalPoints}/7</p>\r\n          <p className=\"remaining-points\">Remaining: {7 - totalPoints}</p>\r\n        </div>\r\n        <div className=\"team-display\">\r\n          {team.map((char, index) => (\r\n            <div key={index} className={`character-card ${isAnimating ? 'fade-in' : ''}`}>\r\n              {char ? (\r\n                <>\r\n                  <img src={char.image} alt={char.name} onError={(e) => { e.target.onerror = null; e.target.src = '/images/characters/default.png' }} />\r\n                  <p>{char.name} ({char.ratio})</p>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <img src={`/images/characters/slot-${index + 1}.png`} alt={`Empty Slot ${index + 1}`} />\r\n                  <p>Empty Slot</p>\r\n                </>\r\n              )}\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <div className=\"team-buttons\">\r\n          <button onClick={generateRandomTeam} className=\"primary-button\">\r\n            Generate Ratio Team\r\n          </button>\r\n          <button onClick={resetTeam} className=\"secondary-button\">Reset Team</button>\r\n        </div>\r\n      </div>\r\n      <div className=\"right-column\">\r\n        <div className=\"available-characters\">\r\n          {characters.map((char) => {\r\n            const isSelected = team.some(c => c && c.name === char.name);\r\n            const canSelect = !isSelected && (7 - totalPoints) >= char.ratio && team.some(c => c === null);\r\n            return (\r\n              <div key={char.name} className=\"character-item\">\r\n                <button\r\n                  onClick={() => handleCharacterClick(char)}\r\n                  disabled={!isSelected && !canSelect}\r\n                  className={isSelected ? 'selected' : ''}\r\n                >\r\n                  <img \r\n                    src={char.tileImage} \r\n                    alt={char.name} \r\n                    onError={(e) => { e.target.onerror = null; e.target.src = '/images/tiles/default.png' }} \r\n                  />\r\n                </button>\r\n                <div className=\"character-info\">\r\n                  <span className=\"character-name\">{char.name} ({char.ratio})</span>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RatioTeamBuilder;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}